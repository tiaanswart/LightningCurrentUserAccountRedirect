<!--
- @author Tiaan Swart (tiaan@cloudinit.nz)
- @date 2018-04-06
- @description 
-
- CHANGE LOG
- 2018-04-06 - Initial setup
-->
<aura:component description="CurrentUserAccountRedirect" access="global" implements="forceCommunity:availableForAllPageTypes">

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler name="change" value="{!v.recordId}" action="{!c.getRecord}" />

    <aura:attribute type="String" required="true" name="redirectIdFieldName" default="Contact.AccountId"/>
    <aura:attribute type="String[]" required="true" name="recordFieldNames" default="Id, Contact.AccountId" access="private"/>
    <aura:attribute type="Boolean" required="true" name="loadRecordView" default="false"/>
    <aura:attribute type="Boolean" required="true" name="showRecordView" default="false" access="private"/>
    <aura:attribute type="Id" name="recordViewId" access="private"/>

    <!-- Attributes used by Record Data -->
    <aura:attribute name="recordId" type="Id" />
    <aura:attribute name="record" type="Object" />
    <aura:attribute name="simpleRecord" type="Object" />
    <aura:attribute name="recordError" type="String" />

    <!-- Record Data - used to query the user record -->
    <force:recordData aura:id="recordLoader"
                      fields="{!v.recordFieldNames}"
                      targetRecord="{!v.record}"
                      targetFields="{!v.simpleRecord}"
                      targetError="{!v.recordError}"
                      recordUpdated="{!c.handleRecordUpdated}"
                      mode="VIEW"/>

    <!-- Record View - used to display the record -->
    <aura:renderIf isTrue="{!v.loadRecordView}">
        <aura:if isTrue="{!v.showRecordView}">
            <force:recordView recordId="{!v.recordViewId}" type="FULL"/>
        </aura:if>
    </aura:renderIf>
</aura:component>